<div class="container py-6">
  <!-- Page Header -->
  <header class="page-header">
    <h1 class="page-title">Projects</h1>
  </header>

  <!-- Filter Tabs and Search -->
  <div class="filter-section">
    <nav class="tabs" role="tablist">
      @for (tab of tabs; track tab) {
        <button
          class="tab-button"
          [class.active]="activeTab === tab.completionStatus"
          (click)="setActiveTab(tab.completionStatus)"
          role="tab"
          [attr.aria-selected]="activeTab === tab.completionStatus">
          {{ tab.label }}
        </button>
      }
    </nav>

    <div class="search-actions">
      <div class="search-container">
        <input
          type="text"
          class="form-input"
          placeholder="Search projects..."
          [(ngModel)]="filterOptions.searchQuery"
          (input)="filterProjects()"
          aria-label="Search projects"
        />
        <button class="search-icon" aria-label="Search">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
          </svg>
        </button>
      </div>

      <button class="btn btn-primary" (click)="addProject()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14M5 12h14"/>
        </svg>
        New Project
      </button>
    </div>
  </div>

  <!-- Projects Grid -->
  <div class="projects-grid">
    @for (project of filteredProjects; track project) {
      <div class="project-card" (click)="navigateToProject(project.id)">
        <div class="project-header">
          <h2 class="project-title">{{ project.name }}</h2>
          <span class="badge" [ngClass]="'badge-' + project.completionStatus.replace('_', '-')">
            {{ project.completionStatus.replace('_', ' ') }}
          </span>
        </div>

        <div class="project-department">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <path d="M9 22V12h6v10"/>
          </svg>
          <span>{{ project.department }}</span>
        </div>

        <p class="project-description">{{ project.description }}</p>

        <div class="progress-section">
          <div class="progress-label">
            <span class="text-secondary">Progress</span>
            <span class="progress-percent font-semibold">{{ project.progress }}%</span>
          </div>
          <div class="progress">
            <div
              class="progress-bar"
              [style.width.%]="project.progress"
              [ngClass]="{
                'progress-bar-success': project.progress === 100,
                'progress-bar-warning': project.progress >= 50 && project.progress < 100,
                'progress-bar-danger': project.progress < 50
              }">
            </div>
          </div>
        </div>

        <div class="project-footer">
          <div class="milestones">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <path d="M22 4L12 14.01l-3-3"/>
            </svg>
            <span>{{ getMilestoneCount(project) }} milestones</span>
          </div>
        </div>
      </div>
    }

    <!-- Empty State -->
    @if (filteredProjects.length === 0) {
      <div class="empty-state">
        <div class="empty-state-icon">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 3h18v18H3z"/>
            <path d="M3 9h18M9 21V9"/>
          </svg>
        </div>
        <div class="empty-state-title">No projects found</div>
        <p class="empty-state-description">
          @if (filterOptions.searchQuery) {
            No projects match your search criteria. Try adjusting your search or filters.
          } @else {
            Get started by creating your first project to organize your work.
          }
        </p>
        <button class="btn btn-primary" (click)="addProject()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 5v14M5 12h14"/>
          </svg>
          Create New Project
        </button>
      </div>
    }
  </div>
</div>
